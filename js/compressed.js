var mapLink=document.querySelector(".modal-map"),mapPopup=document.querySelector(".modal-bigmap"),mapClose=document.querySelector(".modal-close"),writeUsLink=document.querySelector(".writeus"),writeUsPopup=document.querySelector(".modal-writeus"),formWriteUs=writeUsPopup.querySelector(".form-writeus"),userName=writeUsPopup.querySelector("#user-name"),storageUserName="",userEmail=writeUsPopup.querySelector("#user-email"),storageUserEmail="",userText=writeUsPopup.querySelector("#user-text"),closeWriteUs=writeUsPopup.querySelector(".modal-close"),isStorageSupport=!0;mapLink.addEventListener("click",function(e){e.preventDefault(),mapPopup.classList.add("modal-show")}),mapClose.addEventListener("click",function(e){e.preventDefault(),mapPopup.classList.remove("modal-show")}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),mapPopup.classList.contains("modal-show")&&mapPopup.classList.remove("modal-show"))});try{storageUserName=localStorage.getItem("userName")}catch(e){isStorageSupport=!1}try{storageUserEmail=localStorage.getItem("userEmail")}catch(e){isStorageSupport=!1}writeUsLink.addEventListener("click",function(e){e.preventDefault(),writeUsPopup.classList.add("modal-show"),userName.focus()}),formWriteUs.addEventListener("submit",function(e){userName.value&&userEmail.value&&userText.value?isStorageSupport&&(localStorage.setItem("userName",userName.value),localStorage.setItem("userEmail",userEmail.value)):(e.preventDefault(),userName.value?userName.classList.remove("modal-invalid"):userName.classList.add("modal-invalid"),userEmail.value?userEmail.classList.remove("modal-invalid"):userEmail.classList.add("modal-invalid"),userText.value?userText.classList.remove("modal-invalid"):userText.classList.add("modal-invalid"),writeUsPopup.classList.remove("modal-error"),writeUsPopup.offsetWidth=writeUsPopup.offsetWidth,writeUsPopup.classList.add("modal-error"))}),closeWriteUs.addEventListener("click",function(e){e.preventDefault(),writeUsPopup.classList.remove("modal-show"),writeUsPopup.classList.remove("modal-error")}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),writeUsPopup.classList.contains("modal-show")&&writeUsPopup.classList.remove("modal-show"))});